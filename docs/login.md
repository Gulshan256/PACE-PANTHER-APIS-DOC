# login 


## Authentication Process 
Our API uses the OAuth2 authentication protocol for all requests. To access the API, you will need to follow these steps:

<!-- change the heading colour the heading is 1. Choose Your OAuth2 Client Library
 -->

1. Choose Your OAuth2 Client Library
You can use any OAuth2 client library to authenticate your requests. Using any programming language, you can find a library that supports OAuth2. <!-- For example, if you are using Python, you can use the [requests-oauthlib](https://requests-oauthlib.readthedocs.io/en/latest/) library. If you are using JavaScript, you can use the [simple-oauth2] library. --> 

2. Open in Web Browser (Once Every Trading Day)
Before making API calls, you need to open the trading platform in a web browser once every trading day.

3. Enter Your Login Credentials
You will be required to enter your login ID, password, and two-factor authentication (2FA) code for the trading platform. 


4. Obtain the Access Token
Once you've successfully logged in, you will receive an access token.


5. Include Access Token in API Requests
You must include the access token with every API request unless specified otherwise. Use the following format in the request header:
    ```
    Authorization: Bearer {access_token}
    ```
Replace `{access_token}` with the access token obtained during the login process.


6. Handling Token Expiry
If your access token expires, the API will respond with a 401 HTTP status error. In this case, you will need to obtain a new access token by following steps 2 to 4.
---

^^Note^^ : This guide outlines the easy-to-follow process for authenticating with our API. Ensure that you use OAuth2 and include the access token correctly in your requests to access our services effectively. If you encounter a token expiry, simply log in again to obtain a fresh access token.

<style>
.wy-table-responsive table td {
white-space: normal;
}
</style>



## Request
| Request Type | APIs    | Endpoint                               | Description                     |
|-------------- | ------- | -------------------------------------- | --------------------------------- |
| `GET`        | OAuth2 with pacetrader | http://pacetrader.pacefin.in/oauth2/auth | Initiate OAuth2 authentication |


## Headers
| Header | Value |
|-------------- | ------- |
| P-DeviceType | WEB |
| Content-Type | application/json |
| accept | application/json |




## Parameters
| Parameter | Type | Description |
|-------------- | ------- | ------- |
| `scope` | `string` | The scope of the access request. |
| `state` | `string` | A random string generated by your application. |
| `redirect-uri` | `string` | The URL to redirect to after the user grants/denies permission. |
| `response_type` | `string` | The response type. |
| `client_id` | `string` | Your unique client identifier. |


## Body
```json
 {
   "grant_type": "authorization_code",
   "code": "x83hA0gZ0lb_f2xTRVHygTqmVDfDao1ma18HwbTkfnM.ep81O-z_dpwKBS1DrMem54TAgv1HhR7F0ftjXz8CShY",
   "redirect_uri": "http://localhost"
 }
```

## Response
```json
{
    "access_token": "LwrgoKC-JC-7ZZAt6JIJq8B-jX1Lg5jvtvkXuQ7JUeA.Aq9jlncTi9jTPeFx2zd4QsKymFcqOVBsoY5rw1vgRXI",
    "expires_in": 43199,
    "scope": "orders",
    "token_type": "bearer"
}
```



## Code Examples

=== "python - http.client"
    ``` python
    # you an use any other module as well such as requests, urllib, etc.,

    import http.client
    import json

    conn = http.client.HTTPSConnection("pacetrader.pacefin.in")
    payload = ''
    headers = {
    'P-DeviceType': 'WEB',
    'Content-Type': 'application/json',
    'accept': 'application/json'
    }
    conn.request("GET", "/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E", payload, headers)
    res = conn.getresponse()
    data = res.read()
    print(data.decode("utf-8"))

    ```


=== "JavaScript - fetch"
    ``` javascript
    // You can also use other methods such as `axios`,`jQuery`, `XHR`, etc..
    var myHeaders = new Headers();
    myHeaders.append("P-DeviceType", "WEB");
    myHeaders.append("Content-Type", "application/json");
    myHeaders.append("accept", "application/json");

    var requestOptions = {
    method: 'GET',
    headers: myHeaders,
    redirect: 'follow'
    };

    fetch("http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>", requestOptions)
    .then(response => response.text())
    .then(result => console.log(result))
    .catch(error => console.log('error', error));
    
    ```

=== "C#-HttpClient"
    ``` csharp
    // You can also use other libraries such as RestSharp, etc..

    var client = new HttpClient();
    var request = new HttpRequestMessage(HttpMethod.Get, "http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>");
    request.Headers.Add("P-DeviceType", "WEB");
    request.Headers.Add("accept", "application/json");
    var content = new StringContent(string.Empty);
    content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
    request.Content = content;
    var response = await client.SendAsync(request);
    response.EnsureSuccessStatusCode();
    Console.WriteLine(await response.Content.ReadAsStringAsync());


    ```

=== "cURL"
    ``` bash
    curl --location 'http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http%3A%2F%2F127.0.0.1%2F&response_type=code&client_id=%3Cclient_id%3E' \
    --header 'P-DeviceType: WEB' \
    --header 'Content-Type: application/json' \
    --header 'accept: application/json'

    ```

=== "Dart"
    ``` dart

    var headers = {
    'P-DeviceType': 'WEB',
    'Content-Type': 'application/json',
    'accept': 'application/json'
    };
    var request = http.Request('GET', Uri.parse('http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>'));

    request.headers.addAll(headers);

    http.StreamedResponse response = await request.send();

    if (response.statusCode == 200) {
    print(await response.stream.bytesToString());
    }
    else {
    print(response.reasonPhrase);
    }

        
    ```

=== "Go-Native"

    ``` go
    package main

    import (
    "fmt"
    "net/http"
    "io/ioutil"
    )

    func main() {

    url := "http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E"
    method := "GET"

    client := &http.Client {
    }
    req, err := http.NewRequest(method, url, nil)

    if err != nil {
        fmt.Println(err)
        return
    }
    req.Header.Add("P-DeviceType", "WEB")
    req.Header.Add("Content-Type", "application/json")
    req.Header.Add("accept", "application/json")

    res, err := client.Do(req)
    if err != nil {
        fmt.Println(err)
        return
    }
    defer res.Body.Close()

    body, err := ioutil.ReadAll(res.Body)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(string(body))
    }
            
    ```

=== "HTTP"

    ``` http
    GET /oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id> HTTP/1.1
    Host: pacetrader.pacefin.in
    P-DeviceType: WEB
    Content-Type: application/json
    accept: application/json
    ```

=== "Java-OkHttp"

    ``` java
    // You can also use other libraries such as Unirest, etc..

    OkHttpClient client = new OkHttpClient().newBuilder()
    .build();
    MediaType mediaType = MediaType.parse("application/json");
    RequestBody body = RequestBody.create(mediaType, "");
    Request request = new Request.Builder()
    .url("http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>")
    .method("GET", body)
    .addHeader("P-DeviceType", "WEB")
    .addHeader("Content-Type", "application/json")
    .addHeader("accept", "application/json")
    .build();
    Response response = client.newCall(request).execute();

    ```

=== "C - Libcurl"

    ``` c

    CURL *curl;
    CURLcode res;
    curl = curl_easy_init();
    if(curl) {
    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "GET");
    curl_easy_setopt(curl, CURLOPT_URL, "http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E");
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);
    curl_easy_setopt(curl, CURLOPT_DEFAULT_PROTOCOL, "https");
    struct curl_slist *headers = NULL;
    headers = curl_slist_append(headers, "P-DeviceType: WEB");
    headers = curl_slist_append(headers, "Content-Type: application/json");
    headers = curl_slist_append(headers, "accept: application/json");
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
    res = curl_easy_perform(curl);
    }
    curl_easy_cleanup(curl);



    ```

=== "node.js - Native"

    ``` javascript

    // You can also use other libraries such as `axios`,`jQuery`, `request` `Unirest`, etc.. this example uses `node.js` native`

    var http = require('follow-redirects').http;
    var fs = require('fs');

    var options = {
    'method': 'GET',
    'hostname': 'pacetrader.pacefin.in',
    'path': '/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E',
    'headers': {
        'P-DeviceType': 'WEB',
        'Content-Type': 'application/json',
        'accept': 'application/json'
    },
    'maxRedirects': 20
    };

    var req = http.request(options, function (res) {
    var chunks = [];

    res.on("data", function (chunk) {
        chunks.push(chunk);
    });

    res.on("end", function (chunk) {
        var body = Buffer.concat(chunks);
        console.log(body.toString());
    });

    res.on("error", function (error) {
        console.error(error);
    });
    });

    req.end();

    ```


=== "Objective-C - NSURLSession"

    ``` objective-c
    #import <Foundation/Foundation.h>

    dispatch_semaphore_t sema = dispatch_semaphore_create(0);

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E"]
    cachePolicy:NSURLRequestUseProtocolCachePolicy
    timeoutInterval:10.0];
    NSDictionary *headers = @{
    @"P-DeviceType": @"WEB",
    @"Content-Type": @"application/json",
    @"accept": @"application/json"
    };

    [request setAllHTTPHeaderFields:headers];

    [request setHTTPMethod:@"GET"];

    NSURLSession *session = [NSURLSession sharedSession];
    NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
    completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
    if (error) {
        NSLog(@"%@", error);
        dispatch_semaphore_signal(sema);
    } else {
        NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
        NSError *parseError = nil;
        NSDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:data options:0 error:&parseError];
        NSLog(@"%@",responseDictionary);
        dispatch_semaphore_signal(sema);
    }
    }];
    [dataTask resume];
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);

    ```

=== "ocaml-Cohttp"

    ``` ocaml

    open Lwt
    open Cohttp
    open Cohttp_lwt_unix

    let reqBody = 
    let uri = Uri.of_string "http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E" in
    let headers = Header.init ()
        |> fun h -> Header.add h "P-DeviceType" "WEB"
        |> fun h -> Header.add h "Content-Type" "application/json"
        |> fun h -> Header.add h "accept" "application/json"
    in
    Client.call ~headers `GET uri >>= fun (_resp, body) ->
    body |> Cohttp_lwt.Body.to_string >|= fun body -> body

    let () =
    let respBody = Lwt_main.run reqBody in
    print_endline (respBody)

    ```


=== "PHP - cURL"

    ``` php
    //you can also use other libraries such as `Guzzle`, `HTTP_Request2`, `pcel_http`, etc..
    <?php

    $curl = curl_init();

    curl_setopt_array($curl, array(
    CURLOPT_URL => 'http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=%3Cclient_id%3E',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_ENCODING => '',
    CURLOPT_MAXREDIRS => 10,
    CURLOPT_TIMEOUT => 0,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
    CURLOPT_CUSTOMREQUEST => 'GET',
    CURLOPT_HTTPHEADER => array(
        'P-DeviceType: WEB',
        'Content-Type: application/json',
        'accept: application/json'
    ),
    ));

    $response = curl_exec($curl);

    curl_close($curl);
    echo $response;



    ```

=== "Powershell-RestMethod"

    ``` powershell
    $headers = New-Object "System.Collections.Generic.Dictionary[[String],[String]]"
    $headers.Add("P-DeviceType", "WEB")
    $headers.Add("Content-Type", "application/json")
    $headers.Add("accept", "application/json")

    $response = Invoke-RestMethod 'http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>' -Method 'GET' -Headers $headers
    $response | ConvertTo-Json

    ```



=== "R-httr"

    ``` r

    // You can also use other libraries such as `curl`, `resty`, etc..

    library(httr)

    headers = c(
    'P-DeviceType' = 'WEB',
    'Content-Type' = 'application/json',
    'accept' = 'application/json'
    )

    res <- VERB("GET", url = "http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>", add_headers(headers))

    cat(content(res, 'text'))

    ```


=== "Ruby - Net::HTTP"

    ``` ruby

    require "uri"
    require "json"
    require "net/http"

    url = URI("http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>")

    http = Net::HTTP.new(url.host, url.port);
    request = Net::HTTP::Get.new(url)
    request["P-DeviceType"] = "WEB"
    request["Content-Type"] = "application/json"
    request["accept"] = "application/json"

    response = http.request(request)
    puts response.read_body


    ```

=== "Shell - httpie"

    ``` shell
    # You can also use other libraries such as `curl`, `wget`, etc..

    http --follow --timeout 3600 GET 'http://pacetrader.pacefin.in/oauth2/auth?scope=orders holdings&state=3unqcjh2DN1o&redirect-uri=http://127.0.0.1/&response_type=code&client_id=<client_id>' \
    P-DeviceType:'WEB' \
    Content-Type:'application/json' \
    accept:'application/json'

    ```

=== "Swift-URLSession"

    ```swift
    
    var request = URLRequest(url: URL(string: "http://pacetrader.pacefin.in/oauth2/auth?scope=orders%20holdings&state=3unqcjh2DN1o&redirect-uri=http%3A%2F%2F127.0.0.1%2F&response_type=code&client_id=%3Cclient_id%3E")!,timeoutInterval: Double.infinity)
    request.addValue("WEB", forHTTPHeaderField: "P-DeviceType")
    request.addValue("application/json", forHTTPHeaderField: "Content-Type")
    request.addValue("application/json", forHTTPHeaderField: "accept")

    request.httpMethod = "GET"

    let task = URLSession.shared.dataTask(with: request) { data, response, error in 
    guard let data = data else {
        print(String(describing: error))
        return
    }
    print(String(data: data, encoding: .utf8)!)
    }

    task.resume()

    ```
